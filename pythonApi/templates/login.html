{% extends 'origin.html' %}

{% block content %}
{{ super() }}
{% for cat, msg in get_flashed_messages(True) %}
<div class="flash {{cat}}">{{msg}}</div>
{% endfor %}
<form action="/api/login" method="post" class="form-login"><!--<form id="login-form"> -->
    <p><label>Имя: </label><input type="text" name="name" value="" required /></p>
    <p><label>Пароль: </label><input type="text" name="password" value="" required /></p>
    <p><input type="submit" value="Войти"/></p>
    <p><a href="{{url_for('register')}}">Регистрация</a></p>
</form>

<!--<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function(){
            $('#login-form').submit(function(event){
                event.preventDefault(); // Предотвращаем отправку формы по умолчанию

                // Отправляем AJAX запрос на сервер
                $.ajax({
                    type: 'POST',
                    url: '/api/login',
                    data: $(this).serialize(), // Сериализуем данные формы
                    success: function(response){
                        // При успешном ответе перенаправляем на другую страницу
                        window.location.href = '/profile/{{name}}'; // Измените URL на вашу страницу
                    },
                    error: function(xhr, status, error){
                        // При ошибке выводим сообщение об ошибке
                        alert(xhr.responseJSON.message);
                    }
                });
            });
        });
    </script>-->

{% endblock -%}